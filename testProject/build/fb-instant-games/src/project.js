require=function o(r,c,i){function l(e,t){if(!c[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(A)return A(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var a=c[e]={exports:{}};r[e][0].call(a.exports,function(t){return l(r[e][1][t]||t)},a,a.exports,o,r,c,i)}return c[e].exports}for(var A="function"==typeof require&&require,t=0;t<i.length;t++)l(i[t]);return l}({FbInstantGames:[function(t,e,n){"use strict";cc._RF.push(e,"df65flxV5BIf7nZCQKp8RMQ","FbInstantGames"),cc.Class({extends:cc.Component,properties:{testText:cc.Label,shareUrl:String},start:function(){this.shareUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wUHByotJsjynQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAALiSURBVFjD7Zg7aCpREIaPl9tY2AYEK4sUFiliYyMEwWKxCaSxU4SkTGsn2IhgYROIVqIgixKDBBNiIxgUBWVBTLZYiAYDiahY+Ejwsc6tcrkX58THriZFBk5zzgz/tz/rcWYVAADkG8cv8s3jB/DLAWOxGFEoFOg6PDwk0+lUmgBIiOFwCPv7+0AIoa5SqSRFAiQ5mMvlCMdxn+ZEIpGvcXAymYDFYvnUvY8lCML2HSyXy+T6+nqp3MvLy+06OJvN4Pj4GHXr4OAA3X99fV3LwbUAHx4eUAir1Qocx6FnoVBoe4AulwuFyGQyMJ1O4ejoaO5Mq9VCr9fbPODT0xMKt7e3B29vbwAAkE6n0ZxUKrV5wLOzM1Q8Go3+zen1eqDRaOZyTCYTjEajzQF2Oh1QqVQoYLPZ/C83GAyiefl8fnOALMuioh6PZy63Xq+juQ6HA2azmfyAg8EAdDodKsrzPFpzenqK5t/f38sPeHNzg4rZ7XaqI4VCAa1xuVzyAo7HY2AYBhW7u7uj1o1GIzAajWhdo9GQDzCfz6MiBoMB3t/fP629uLhAa8/Pz+UBFEURHA4HKhKPxxcKtNtttHZnZwe63a50wGq1Su1SOp3OUi54vV60PpFILKz9vaiZYFkW3ddoNMTj8SzVkNTrdXTf5/MRhmGIUqlcr5uh3WVyrkwms34/eHV1tfGhKBAIEFEUV3eQ9nJvYnEct7qD6XR6a6NlNBpdzcF+vw+7u7tbc5AQAo+Pj8s7mM1miSAIWx3Qqe879vdkNpvRp2RZFqRGIBCguthqtRZf1LlcTtLNvyien5+pgP82vSigKIpgs9lkHXqwcLvdqIZOp4PBYEAHrFQqaKFKpULtXzd4nqe6eHt7Swd0Op2SOo9V5uqTkxNUy2KxwGQymQes1WrUp3p5eQG5g9bMEkKgWCzOXzPJZBL9lfv9fqJWq2W/VvR6PWEYBj0Lh8Pk48u04ucb9Q/gF8cfVFprgBwHlgUAAAAASUVORK5CYII="},shareGame:function(){var t=this;console.log("シェア"),"undefined"!=typeof FBInstant&&FBInstant.shareAsync({intent:"SHARE",image:this.getImgBase64(),text:"Great!",data:{myReplayData:"..."}}).then(function(){t.testText.string="共有完了",console.log("共有完了")})},sendRequest:function(){console.log("招待"),"undefined"!=typeof FBInstant&&FBInstant.shareAsync({intent:"CUSTOM",image:this.getImgBase64(),text:"",data:{myReplayData:"..."}}).then(function(){this.testText.string="Message was sent successfully",console.log("Message was sent successfully")}).catch(function(){this.testText.string="",console.log("failed!")})},playMessage:function(){console.log("プレイ状況通知"),"undefined"!=typeof FBInstant&&FBInstant.updateAsync({action:"CUSTOM",cta:"Play",image:this.shareUrl,text:{default:FBInstant.player.getName()+"just played. It's your turn!",localizations:{en_US:"",pt_BR:"",id_ID:"",fr_CA:"",vi_VN:"",th_TH:"",tr_TR:"",de_DE:"",es_ES:"",ar_AE:"",ja_JP:FBInstant.player.getName()+"さんが今プレイしました。あなたの番です！"}},template:"WORD_PLAYED",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("Message was sent successfully"),this.testText.string="Message was sent successfully"}).catch(function(){console.log("failed!"),this.testText.string="failed"})},createShortCut:function(){console.log("ショートカット作成"),"undefined"!=typeof FBInstant&&FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){this.testText.string="ショートカット作成"}).catch(function(){this.testText.string="ショートカット作成失敗"})})},PlayWithFriends:function(){console.log("一緒にプレイ"),"undefined"!=typeof FBInstant&&FBInstant.context.chooseAsync().then(function(t){this.testText.string="FBInstant.context.chooseAsync complete",console.log("FBInstant.context.chooseAsync complete"),console.log(t)})},onBuyBot:function(){FBInstant.player.subscribeBotAsync().then({}).then(function(t){console.log("Bot購読済み"),this.testText.string="Bot購読済み"}).catch(function(t){this.testText.string="Bot未購読"})},getImgBase64:function(){var t=cc.find("Canvas"),e=cc.winSize.width,n=cc.winSize.height,s=new cc.RenderTexture(e,n);s.begin(),t._sgNode.visit(),s.end();var a=document.createElement("canvas"),o=a.getContext("2d");if(a.width=e,a.height=n,cc._renderType===cc.game.RENDER_TYPE_CANVAS){var r=s.getSprite().getTexture().getHtmlElementObj();o.drawImage(r,0,0),console.log("renderType:canvas")}else if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var c=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,c);var i=s.getSprite().getTexture()._glID;gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,i,0);var l=new Uint8Array(e*n*4);gl.readPixels(0,0,e,n,gl.RGBA,gl.UNSIGNED_BYTE,l),gl.bindFramebuffer(gl.FRAMEBUFFER,null);for(var A=4*e,g=0;g<n;g++){var u=n-1-g,f=new Uint8ClampedArray(l.buffer,u*e*4,A),h=new ImageData(f,e,1);o.putImageData(h,0,g)}console.log("renderType:WebGL")}return a.toDataURL("image/png")}}),cc._RF.pop()},{}]},{},["FbInstantGames"]);