require=function o(c,r,i){function l(e,t){if(!r[e]){if(!c[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(g)return g(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var a=r[e]={exports:{}};c[e][0].call(a.exports,function(t){return l(c[e][1][t]||t)},a,a.exports,o,c,r,i)}return r[e].exports}for(var g="function"==typeof require&&require,t=0;t<i.length;t++)l(i[t]);return l}({FbInstantGames:[function(t,e,n){"use strict";cc._RF.push(e,"df65flxV5BIf7nZCQKp8RMQ","FbInstantGames"),cc.Class({extends:cc.Component,properties:{testText:cc.Label,shareUrl:String,spsp:cc.Node},start:function(){console.log(this.getImgBase64())},shareGame:function(){var t=this;console.log("シェア"),this.spsp.active=!0,"undefined"!=typeof FBInstant&&(FBInstant.shareAsync({intent:"SHARE",image:this.getImgBase64(),text:"Great!",data:{myReplayData:"..."}}).then(function(){t.testText.string="共有完了",console.log("共有完了")}),this.spsp.active=!1)},sendRequest:function(){console.log("招待"),"undefined"!=typeof FBInstant&&FBInstant.shareAsync({intent:"CUSTOM",image:this.getImgBase64(),text:"",data:{myReplayData:"..."}}).then(function(){this.testText.string="Message was sent successfully",console.log("Message was sent successfully")}).catch(function(){this.testText.string="",console.log("failed!")})},playMessage:function(){console.log("プレイ状況通知"),"undefined"!=typeof FBInstant&&FBInstant.updateAsync({action:"CUSTOM",cta:"Play",image:this.getImgBase64(),text:{default:FBInstant.player.getName()+"just played. It's your turn!",localizations:{en_US:"",pt_BR:"",id_ID:"",fr_CA:"",vi_VN:"",th_TH:"",tr_TR:"",de_DE:"",es_ES:"",ar_AE:"",ja_JP:FBInstant.player.getName()+"さんが今プレイしました。あなたの番です！"}},template:"WORD_PLAYED",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("Message was sent successfully"),this.testText.string="Message was sent successfully"}).catch(function(){console.log("failed!"),this.testText.string="failed"})},createShortCut:function(){console.log("ショートカット作成"),"undefined"!=typeof FBInstant&&FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){this.testText.string="ショートカット作成"}).catch(function(){this.testText.string="ショートカット作成失敗"})})},PlayWithFriends:function(){console.log("一緒にプレイ"),"undefined"!=typeof FBInstant&&FBInstant.context.chooseAsync().then(function(t){this.testText.string="FBInstant.context.chooseAsync complete",console.log("FBInstant.context.chooseAsync complete"),console.log(t)})},onBuyBot:function(){FBInstant.player.subscribeBotAsync().then({}).then(function(t){console.log("Bot購読済み"),this.testText.string="Bot購読済み"}).catch(function(t){this.testText.string="Bot未購読"})},getImgBase64:function(){var t=cc.find("Canvas"),e=720,n=375,s=new cc.RenderTexture(e,n);s.begin(),t._sgNode.visit(),console.log(t._sgNode),s.end();var a=document.createElement("canvas"),o=a.getContext("2d");if(a.width=e,a.height=n,cc._renderType===cc.game.RENDER_TYPE_CANVAS){var c=s.getSprite().getTexture().getHtmlElementObj();o.drawImage(c,360,n/2),console.log("renderType:canvas")}else if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var r=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,r);var i=s.getSprite().getTexture()._glID;gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,i,0);var l=new Uint8Array(108e4);gl.readPixels(0,0,e,n,gl.RGBA,gl.UNSIGNED_BYTE,l),gl.bindFramebuffer(gl.FRAMEBUFFER,null);for(var g=0;g<n;g++){var u=374-g,f=new Uint8ClampedArray(l.buffer,u*e*4,2880),h=new ImageData(f,e,1);o.putImageData(h,0,g)}console.log("renderType:WebGL")}return a.toDataURL("image/png")},showSS:function(){this.spsp.active=!0,console.log(this.getImgBase64()),this.spsp.active=!1}}),cc._RF.pop()},{}]},{},["FbInstantGames"]);